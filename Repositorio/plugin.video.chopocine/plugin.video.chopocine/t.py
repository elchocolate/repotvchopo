def main( ): import re,requests, random,xbmc,xbmcgui url='https://pastebin.com/raw/9eYhgWfa' torete = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:83.0) Gecko/20100101 Firefox/83.0","Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","Accept-Language": "es-ES,es;q=0.8,en-US;q=0.5,en;q=0.3","Upgrade-Insecure-Requests": "1"}  url = requests.get(url,headers=torete).text  torete = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:83.0) Gecko/20100101 Firefox/83.0","Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","Accept-Language": "es-ES,es;q=0.8,en-US;q=0.5,en;q=0.3","Upgrade-Insecure-Requests": "1"}  de = requests.get(url,headers=torete).text proxii= re.findall('(\d+.*?:\d+).*?\n',de) lista = len(proxii) dialog = xbmcgui.Dialog() ret = dialog.select('[B][LOWERCASE][CAPITALIZE][COLOR lime]buscar, un proxy?:[/B][/COLOR][/CAPITALIZE][/LOWERCASE]', ['[B][LOWERCASE][CAPITALIZE][COLOR lime]si, buscar UN PROXY[/B][/COLOR][/CAPITALIZE][/LOWERCASE]', '[B][LOWERCASE][CAPITALIZE][COLOR red]no QUIERO PROXY[/B][/COLOR][/CAPITALIZE][/LOWERCASE]']) channels = ['si','no']   decidir = channels[ret] if 'no' in decidir:     xbmcgui.Dialog().ok('[B][COLOR yellow]SEGURAMENTE  NECESITES UN PROXY[COLOR red][/B][/COLOR]', '[B][LOWERCASE][CAPITALIZE][COLOR white]PARA ALGUNA DE LAS WEBS, QUE TU OPERADORA TE BLOQUEA EL ACCESO... DALE A SI EN BUSCAR PROXY PARA DISFRUTAR DE ELLAS..[/COLOR][/CAPITALIZE][/LOWERCASE][/B]') if 'si' in decidir:     xbmcgui.Dialog().ok('[B][COLOR yellow]ENCONTRADOS [COLOR lime]'+str(lista)+'[COLOR yellow] proxys[/B][/COLOR]','[B][COLOR white]VAMOS A PROBAR 20 ALEATORIAMENTE,\nDAR EN OK Y ESPERE... [/B][/COLOR]')     numero_intentos=1     while int(numero_intentos)< 21:            numero_intentos+=1              sel1 = random.choice(proxii)         viva = {"https": "http://"+sel1}             cuevana='Cuevana 3'         try:                   url3 = 'https://cuevana3.io/'             def cuerpo(url3):#torete                 import re , requests ,json                         url=url3                 torete = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:83.0) Gecko/20100101 Firefox/83.0","Accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8","Accept-Language": "es-ES,es;q=0.8,en-US;q=0.5,en;q=0.3","Upgrade-Insecure-Requests": "1"}                  de = requests.get(url, proxies=viva, headers=torete,timeout=5).text                 return de             de=cuerpo(url3)             if cuevana in de:                 xbmcgui.Dialog().ok('[B][COLOR yellow]PROXY VALIDO ENCONTRADO[/B][/COLOR]','[B][COLOR lime] ACTIVALO... [/B][/COLOR]')                 return sel1                 break         except:             if not cuevana in de:                   numero_intentos+=1             numero_intentos=numero_intentos                if int(numero_intentos)> 20:                 xbmcgui.Dialog().ok('[B][COLOR pink]NINGUN PROXY ENCONTRADO[/B][/COLOR]','[B][LOWERCASE][CAPITALIZE][COLOR red]INTENTALO DE NUEVO[/CAPITALIZE][/LOWERCASE][/B][/COLOR]')                     break